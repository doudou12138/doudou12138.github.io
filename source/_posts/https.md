---
title: https
category: 计网/面经
---
- https加密的过程
1. 客户端发起一个http请求,告诉服务器自己支持哪些hash算法
2. 服务端把自己的信息以数字证书的形式返回给客户端(包括:密钥公钥,网站地址,证书颁发机构,生效日期)
3. 客户端验证证书合法性(包括对比网站地址和当前地址,证书过期)
4. 生成随机密码(作为后续对称加密密钥).使用公钥加密,发给服务端,服务端使用私钥解密
5. 生成对称加密算法.验证完服务端身份后,客户端生成一个对称加密算法,以公钥加密发送给服务端.之后客户端与服务端就可以用这个对称加密算法来加密和解密通信内容了

- https如何防止重放攻击
有两种重放:
1. 重放请求: https通过**序列号**来解决的,客户端会维护一个从0开始的序列号,每一次https请求都会加1,并且该序列号会放到数据的某个位置 (MAC输入的内容是数据+序列号+MAC密钥).请求到服务端后,服务端可以通过序列号去筛除重放攻击的请求  
2. 重放连接: 通过**不重数nouce**解决. 不重数由客户端和服务器各自生成的不重数拼接而成。并通过不重数的参与来生成主密钥（Master Secret）。由此避免了多次重放攻击。  
